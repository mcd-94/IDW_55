

<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard Médicos</title>
<link rel="stylesheet" href="../../styles/global.css" />
<link rel="stylesheet" href="../../styles/admin_dashboard.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha512-..." crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
   <header>
      <div class="header-content-container" id="headerContentContainer">

        <div>
          <a href="index.html">
            <img src="../../assets/logos/logoHeader.png" id="logoHeader"/>
          </a>
        </div>

        <nav id="mainNavMenu">
          <ul>
            <li class="menu-element">
              <a href="pages/especialidades/especialidades.html"
                >Especialidades</a
              >
            </li>
            <li class="menu-element">
              <a href="pages/contacto/contacto.html">Contacto</a>
            </li>
            <li class="menu-element">
              <a href="pages/institucional/institucional.html">Institucional</a>
            </li>
             <li class="menu-element">
              <a href="pages/profesionales_general/profesionales_general.html">Profesionales</a>
            </li>
          </ul>
        </nav>

        <div class="burger-button-container">
          <button id="burgerButton">
            <svg
              id="burgerIcon"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg"
            >
              <rect y="4" width="24" height="2" fill="#ffffff" rx="1"></rect>
              <rect y="11" width="24" height="2" fill="#ffffff" rx="1"></rect>
              <rect y="18" width="24" height="2" fill="#ffffff" rx="1"></rect>
            </svg>
            <svg
              id="closeIcon"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg"
              class="hidden"
            >
              <line x1="4" y1="4" x2="20" y2="20" stroke="#ffffff" stroke-width="2" stroke-linecap="round" />
              <line x1="20" y1="4" x2="4" y2="20" stroke="#ffffff" stroke-width="2" stroke-linecap="round" />
            </svg>
          </button>
        </div>

      </div>
    </header>
    <div id="backdrop" class="hidden"></div>
<div class="main-content">

  <div style="display: flex; flex-direction: column;, align-items: center; justify-content: center;">

    <h2 class="dashboardAdminTitle">Dashboard Admin</h2>
    <div style="display: flex; flex-direction: row;, align-items: center; justify-content: center;">
      <button id="btnNuevo">Nuevo Médico</button>
      <input type="text" id="searchInput" placeholder="Buscar...">
    </div>

  </div>

<table>
<thead>
<tr>
<th>Apellidos</th><th>Nombres</th><th>DNI</th><th>Teléfono</th><th>Especialidad</th><th>Matrícula</th><th>Acciones</th>
</tr>
</thead>
<tbody id="tablaMedicos"></tbody>
</table>

<div id="modalMedico" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3 id="modalTitle">Nuevo Médico</h3>
      <button id="cerrarModal">&times;</button>
    </div>
    <div class="modal-body">
      <input type="hidden" id="medicoId">
      <input type="text" id="apellidos" placeholder="Apellidos">
      <input type="text" id="nombres" placeholder="Nombres">
      <input type="text" id="dni" placeholder="DNI">
      <input type="text" id="telefono" placeholder="Teléfono">
      <input type="text" id="especialidad" placeholder="Especialidad">
      <input type="text" id="matricula" placeholder="Matrícula">
      <button id="guardarMedico">Guardar</button>
    </div>
  </div>
</div>

<footer>
  <div class="footer-content">
    <div class="footer-logo-container">
      <img src="../../assets/logos/logoCompletoSF.png">
    </div>
    <div class="footer-links">
      <div>
        <h3>Nuestras Especialidades</h3>
          <nav>
          <ul>
            <li><a href="pages/especialidades/oftalmologia.html">Oftalmología</a></li>
            <li><a href="pages/especialidades/cardiologia.html">Cardiología</a></li>
            <li><a href="pages/especialidades/odontologia.html">Odontología</a></li>
            <li><a href="pages/especialidades/traumatologia.html">Traumatología</a></li>
            <li><a href="pages/especialidades/neurologia.html">Neurología</a></li>
            <li><a href="pages/especialidades/ginecologia.html">Ginecología y Obstetricia</a></li>
          </ul>
        </nav>
      </div>
      <div>
        <h3>Servicios Adicionales</h3>
        <nav>
          <ul>
            <li><a href="#">Laboratorio</a></li>
            <li><a href="#">Medicina Deportiva</a></li>
            <li><a href="#">Telemedicina</a></li>
            <li><a href="#">Rehabilitación Online</a></li>
            <li><a href="#">Cirugia Robotica</a></li>
          </ul>
        </nav>
      </div>
      <div>
        <h3>Contacto</h3>
        <nav>
          <ul>
            <li><p>Dirección: Av. Mendoza 2301, Rio Gallegos - Santa Cruz</p></li>
            <li><p>Horarios: Lunes a Sábados 08:00 a 20:00</p></li>
            <li><p>Whatsapp: 2978451223</p></li>
            <li><p>Correo Electronico: Medicalidw@gmail.com</p></li>
          </ul>
        </nav>
      </div>
    </div>
  </div>
  <div class="copyright">
    <p>© MedicalIDW - Clínica Médica</p>
    <p>Introducción al Desarrollo Web - 2025</p>
  </div>
</footer>
</div>

<script type="module">
import { medicosIniciales } from '../../scripts/medicos.js';
if(!localStorage.getItem('medicos')){
    const inicial = medicosIniciales.map((m,i)=>({id:i+1, ...m}));
    localStorage.setItem('medicos', JSON.stringify(inicial));
}
let medicoEditarId = null;
const tabla = document.getElementById('tablaMedicos');
const modal = document.getElementById('modalMedico');
function obtenerMedicos() { return JSON.parse(localStorage.getItem('medicos')||'[]'); }
function guardarMedicos(medicos) { localStorage.setItem('medicos', JSON.stringify(medicos)); }
function renderizarTabla(filtro=''){
    const medicos = obtenerMedicos().filter(m =>
        m.apellidos.toLowerCase().includes(filtro.toLowerCase()) ||
        m.nombres.toLowerCase().includes(filtro.toLowerCase()) ||
        m.dni.includes(filtro)
    );
    tabla.innerHTML = medicos.map(m => `
        <tr data-id="${m.id}">
            <td>${m.apellidos}</td>
            <td>${m.nombres}</td>
            <td>${m.dni}</td>
            <td>${m.telefono}</td>
            <td>${m.especialidad}</td>
            <td>${m.matricula}</td>
            <td class="actionButtons">
                <button class="editar-btn">
                  <span class="fas fa-edit editar-btn"></span>
                  Editar
                </button>
                <button class="eliminar-btn">
                  <span class="fas fa-trash-alt"></span>
                  Eliminar
                </button>
            </td>
        </tr>
    `).join('');
}
tabla.addEventListener('click', e=>{
    const button = e.target.closest('button');
    if(!button) return;
    const tr = button.closest('tr');
    if(!tr) return;
    const id = parseInt(tr.dataset.id);
    if(button.classList.contains('editar-btn')){
        const m = obtenerMedicos().find(x=>x.id===id);
        medicoEditarId = id;
        modal.style.display = 'flex';
        document.getElementById('modalTitle').textContent = 'Editar Médico';
        ['apellidos','nombres','dni','telefono','especialidad','matricula'].forEach(f=>document.getElementById(f).value = m[f]);
    }
    if(button.classList.contains('eliminar-btn')){
    if(!confirm('¿Está seguro que desea eliminar este médico?')) return;
    let medicos = obtenerMedicos();
    medicos = medicos.filter(x=>x.id!==id);
    guardarMedicos(medicos);
    renderizarTabla(document.getElementById('searchInput').value);
}
});
document.getElementById('btnNuevo').onclick = ()=>{
    medicoEditarId = null;
    modal.style.display='flex';
    document.getElementById('modalTitle').textContent='Nuevo Médico';
    ['apellidos','nombres','dni','telefono','especialidad','matricula'].forEach(f=>document.getElementById(f).value='');
};
document.getElementById('cerrarModal').onclick = ()=> modal.style.display='none';
document.getElementById('guardarMedico').onclick = ()=>{
    const m = {};
    ['apellidos','nombres','dni','telefono','especialidad','matricula'].forEach(f=>{
        m[f] = document.getElementById(f).value.trim();
        if(!m[f]) { alert('Complete todos los campos'); throw 'Campos incompletos'; }
    });
    const medicos = obtenerMedicos();
    if(medicoEditarId){
        const idx = medicos.findIndex(x=>x.id===medicoEditarId);
        medicos[idx] = {id:medicoEditarId, ...m};
    } else {
        const nuevoId = medicos.length ? Math.max(...medicos.map(x=>x.id))+1 : 1;
        medicos.push({id:nuevoId, ...m});
    }
    guardarMedicos(medicos);
    modal.style.display='none';
    renderizarTabla(document.getElementById('searchInput').value);
};
document.getElementById('searchInput').oninput = e=>{
    renderizarTabla(e.target.value);
};
renderizarTabla();
</script>
<script src="../../scripts/burgerMenu.js"></script>
</body>
</html>
